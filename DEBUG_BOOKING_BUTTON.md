# ğŸ› é¢„è®¢æŒ‰é’®æ— æ³•è·³è½¬ - è°ƒè¯•æŒ‡å—

## é—®é¢˜æè¿°
ç”¨æˆ·åé¦ˆï¼šç‚¹å‡»è½¦æ¬¡åˆ—è¡¨é¡µçš„"é¢„è®¢"æŒ‰é’®æ— æ³•è·³è½¬åˆ°è®¢å•å¡«å†™é¡µ

## å·²ä¿®å¤çš„é—®é¢˜
1. âœ… å­—æ®µåç§°é”™è¯¯ï¼š`train.fromStation` â†’ `train.departureStation`
2. âœ… å­—æ®µåç§°é”™è¯¯ï¼š`train.toStation` â†’ `train.arrivalStation`

## å½“å‰çŠ¶æ€
- ä»£ç å·²ä¿®å¤å¹¶æäº¤
- æ·»åŠ äº†è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
- éœ€è¦ç”¨æˆ·åˆ·æ–°æµè§ˆå™¨å¹¶æµ‹è¯•

---

## è°ƒè¯•æ­¥éª¤

### Step 1: åˆ·æ–°æµè§ˆå™¨
**é‡è¦ï¼** å‰ç«¯ä»£ç ä¿®æ”¹åéœ€è¦åˆ·æ–°æµè§ˆå™¨æ‰èƒ½ç”Ÿæ•ˆã€‚

```
æ“ä½œï¼š
1. æŒ‰ Cmd+Shift+R (Mac) æˆ– Ctrl+Shift+R (Windows) å¼ºåˆ¶åˆ·æ–°
2. æˆ–è€…åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ chrome://restart (Chromeæµè§ˆå™¨)
```

---

### Step 2: æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

```
æ“ä½œï¼š
1. æŒ‰ F12 æˆ– Cmd+Option+I (Mac) æˆ– Ctrl+Shift+I (Windows)
2. åˆ‡æ¢åˆ° Console æ ‡ç­¾é¡µ
3. æ¸…ç©ºä¹‹å‰çš„æ—¥å¿—ï¼ˆç‚¹å‡»ğŸš«å›¾æ ‡ï¼‰
```

---

### Step 3: ç‚¹å‡»é¢„è®¢æŒ‰é’®

ç‚¹å‡»ä»»æ„è½¦æ¬¡çš„"é¢„è®¢"æŒ‰é’®ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºã€‚

**é¢„æœŸçš„æ—¥å¿—é¡ºåº**ï¼š

```javascript
// 1. ç‚¹å‡»æŒ‰é’®æ—¶
ğŸ”˜ é¢„è®¢æŒ‰é’®è¢«ç‚¹å‡»ï¼Œè½¦æ¬¡: G103

// 2. æ£€æŸ¥åº§ä½
ğŸ« è½¦æ¬¡ G103 æ˜¯å¦æœ‰ç¥¨: true åº§ä½ä¿¡æ¯: { äºŒç­‰åº§: "æœ‰", ä¸€ç­‰åº§: "10", ... }

// 3. ç¡®è®¤æœ‰ç¥¨
âœ… è½¦æ¬¡æœ‰å¯ç”¨åº§ä½ï¼Œå‡†å¤‡è·³è½¬

// 4. å‡†å¤‡è·³è½¬
ğŸ« å‡†å¤‡è·³è½¬åˆ°è®¢å•é¡µï¼Œè½¦æ¬¡æ•°æ®: {
  date: "2026-01-20",
  trainNo: "G103",
  departureStation: "åŒ—äº¬å—",
  arrivalStation: "ä¸Šæµ·è™¹æ¡¥",
  ...
}

// 5. è°ƒç”¨navigate
âœ… navigate å‡½æ•°å·²è°ƒç”¨
```

---

## å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: çœ‹ä¸åˆ°ä»»ä½•æ—¥å¿—

**åŸå› **ï¼šå‰ç«¯ä»£ç æ²¡æœ‰æ›´æ–°

**è§£å†³**ï¼š
```
1. æ£€æŸ¥ Vite æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆç»ˆç«¯åº”è¯¥æ˜¾ç¤º "Local: http://localhost:5174"ï¼‰
2. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ (Cmd+Shift+R)
3. å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œé‡å¯å‰ç«¯æœåŠ¡ï¼š
   - ç»ˆç«¯æŒ‰ Ctrl+C åœæ­¢
   - è¿è¡Œ npm run dev é‡æ–°å¯åŠ¨
```

---

### é—®é¢˜2: æ˜¾ç¤º"è¯¥è½¦æ¬¡æ— å¯ç”¨åº§ä½"

**æ—¥å¿—ç¤ºä¾‹**ï¼š
```
ğŸ”˜ é¢„è®¢æŒ‰é’®è¢«ç‚¹å‡»ï¼Œè½¦æ¬¡: G103
ğŸ« è½¦æ¬¡ G103 æ˜¯å¦æœ‰ç¥¨: false åº§ä½ä¿¡æ¯: { äºŒç­‰åº§: "--", ä¸€ç­‰åº§: "--", ... }
âŒ è¯¥è½¦æ¬¡æ— å¯ç”¨åº§ä½
```

**åŸå› **ï¼šæ‰€æœ‰åº§ä½éƒ½æ˜¾ç¤ºä¸º "--" æˆ– "æ— "

**è§£å†³**ï¼š
```
1. æ£€æŸ¥åç«¯æ˜¯å¦æ­£ç¡®è¿”å›åº§ä½æ•°æ®
2. æ£€æŸ¥æ•°æ®åº“ä¸­ train_seats è¡¨æ˜¯å¦æœ‰æ•°æ®ï¼š
   sqlite3 backend/database.db "SELECT * FROM train_seats WHERE train_id = 7 LIMIT 5;"
3. å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œéœ€è¦é‡æ–°åˆå§‹åŒ–ï¼š
   cd backend/src/database
   node setup_complete_system.js
```

---

### é—®é¢˜3: ç‚¹å‡»æŒ‰é’®æ²¡æœ‰ä»»ä½•ååº”

**å¯èƒ½åŸå› **ï¼š
1. æŒ‰é’®è¢«ç¦ç”¨
2. ç‚¹å‡»äº‹ä»¶æ²¡æœ‰ç»‘å®š
3. JavaScript é”™è¯¯

**æ£€æŸ¥æ–¹æ³•**ï¼š
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
document.querySelectorAll('.trainList-bookButton').forEach((btn, index) => {
  console.log(`æŒ‰é’® ${index}:`, {
    disabled: btn.disabled,
    class: btn.className,
    hasClickListener: btn.onclick !== null
  });
});
```

---

### é—®é¢˜4: æ˜¾ç¤ºé”™è¯¯"navigate is not defined"

**æ—¥å¿—ç¤ºä¾‹**ï¼š
```
âŒ è·³è½¬å¤±è´¥: ReferenceError: navigate is not defined
```

**åŸå› **ï¼šuseNavigate hook æ²¡æœ‰æ­£ç¡®å¯¼å…¥æˆ–è°ƒç”¨

**æ£€æŸ¥**ï¼š
```typescript
// frontend/src/components/TrainList/TrainList.tsx
import { useNavigate } from 'react-router-dom';  // âœ… å¿…é¡»å¯¼å…¥

const TrainList: React.FC<TrainListProps> = ({ ... }) => {
  const navigate = useNavigate();  // âœ… å¿…é¡»è°ƒç”¨
  // ...
};
```

---

### é—®é¢˜5: navigate è°ƒç”¨æˆåŠŸä½†æ²¡æœ‰è·³è½¬

**æ—¥å¿—ç¤ºä¾‹**ï¼š
```
âœ… navigate å‡½æ•°å·²è°ƒç”¨
// ä½†é¡µé¢æ²¡æœ‰è·³è½¬
```

**å¯èƒ½åŸå› **ï¼š
1. è·¯ç”±é…ç½®é”™è¯¯
2. OrderFillPage ç»„ä»¶æŠ¥é”™å¯¼è‡´æ— æ³•æ¸²æŸ“
3. React Router ç‰ˆæœ¬é—®é¢˜

**æ£€æŸ¥è·¯ç”±**ï¼š
```typescript
// frontend/src/App.tsx
<Route path="/order" element={<OrderFillPage />} />  // âœ… å¿…é¡»å­˜åœ¨
```

**æ£€æŸ¥ OrderFillPage**ï¼š
```bash
# æŸ¥çœ‹æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯
npm run dev

# å¦‚æœçœ‹åˆ°é”™è¯¯ï¼Œéœ€è¦ä¿®å¤ OrderFillPage.tsx
```

---

### é—®é¢˜6: TrainList ä¸åœ¨ Router å†…éƒ¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
useNavigate() may be used only in the context of a <Router> component
```

**è§£å†³**ï¼š
```typescript
// ç¡®ä¿ TrainListPage åœ¨ App.tsx çš„ <Router> å†…éƒ¨
<Router>
  <Routes>
    <Route path="/trains" element={<TrainListPage />} />
  </Routes>
</Router>
```

---

## å®Œæ•´æµ‹è¯•æ¸…å•

### âœ… å‰ç«¯å‡†å¤‡
- [ ] Vite å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- [ ] æµè§ˆå™¨å·²å¼ºåˆ¶åˆ·æ–° (Cmd+Shift+R)
- [ ] å¼€å‘è€…å·¥å…·å·²æ‰“å¼€ (F12)
- [ ] Console æ ‡ç­¾é¡µå·²æ¸…ç©º

### âœ… åç«¯å‡†å¤‡
- [ ] åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (ç«¯å£ 5175)
- [ ] æ•°æ®åº“æœ‰è½¦æ¬¡æ•°æ®
- [ ] æ•°æ®åº“æœ‰åº§ä½æ•°æ®

### âœ… æµ‹è¯•æ­¥éª¤
1. [ ] è¿›å…¥è½¦æ¬¡åˆ—è¡¨é¡µ
2. [ ] ç‚¹å‡»ä»»æ„"é¢„è®¢"æŒ‰é’®
3. [ ] è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—
4. [ ] è®°å½•æ‰€æœ‰è¾“å‡º
5. [ ] æ£€æŸ¥æ˜¯å¦è·³è½¬åˆ° /order

---

## å¿«é€Ÿæ£€æŸ¥å‘½ä»¤

### æ£€æŸ¥å‰ç«¯æ˜¯å¦è¿è¡Œ
```bash
curl http://localhost:5174
# åº”è¯¥è¿”å› HTML å†…å®¹
```

### æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
```bash
curl http://localhost:5175/health
# æˆ–
curl -X POST http://localhost:5175/api/trains/search \
  -H "Content-Type: application/json" \
  -d '{"fromCity":"åŒ—äº¬","toCity":"ä¸Šæµ·","departureDate":"2026-01-20"}'
```

### æ£€æŸ¥æ•°æ®åº“
```bash
cd /Users/od/Desktop/cs3604-12306-automation-mcp
sqlite3 backend/database.db "SELECT COUNT(*) FROM trains;"
sqlite3 backend/database.db "SELECT COUNT(*) FROM train_seats;"
```

---

## è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´æ—¥å¿—**ï¼ˆæˆªå›¾æˆ–å¤åˆ¶æ–‡æœ¬ï¼‰
2. **ç‚¹å‡»æŒ‰é’®æ—¶çš„æ‰€æœ‰è¾“å‡º**
3. **æµè§ˆå™¨ç½‘ç»œè¯·æ±‚**ï¼ˆNetwork æ ‡ç­¾é¡µï¼‰
4. **æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯**ï¼ˆçº¢è‰²æ–‡æœ¬ï¼‰

---

**æœ€åæ›´æ–°**ï¼š2026-01-19
**ç›¸å…³æäº¤**ï¼šd91f6a9
